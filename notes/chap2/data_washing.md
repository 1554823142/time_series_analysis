# 数据清理

## 采样

**减少(或增加)数据的采样频率或分辨率**，即将数据的时间间隔扩展，保留原始数据的一部分信息，并删除不必要的细节

- 在时间序列中, 下采样通常指将数据从高频率（例如，每分钟、每天等）降到低频率（例如，每小时、每月等）。这样可以减少数据的量，同时保持重要的趋势信息

  
  
- 而上采样是"魔法", 可以认为不进行测量，但仍然认为你可以从不频繁的测量中获得高分辨率的数据
  
  上采样的使用场景:
  
   - 不规则的时间序列转化为规则的时间序列(可以使用滑动连接)
   - 输入数据的采样频率不同
   - 时间序列的动态性(了解数据的发展趋势, 这时可以将上采样理解为数据缺失问题)

## 数据平滑

- 目的: 消除峰值和测量误差(有时可能是正确的)

- 常用方法: **指数平滑法**

  更具有时间意识，也就是将较近的数据点的权重，设置得高于较远的数据点的权重。因此，对于给定的窗口，最近的时间点加权最重，而更早的时间点的权重随时间呈指数递减; 即**更新的时间信息占比更大**
  
  指数平滑的计算公式:
  $$
  S_t = d \times S_{t-1} + (1 - d) \times x_t
  $$
  
- 

​	将$$S_{t-1}$$写成类似的形式带入可得:
$$
d \times (d \times S_{t -2} + (1 -d) \times x_{t - 1}) + (1-d) \times x_t
$$
​	进一步化简得:
$$
d^3 \times x_{t-3} + d^2 \times x_{t-2} + d \times x_{t-1}
$$
​	python中提供的计算指数加权移动的函数是`pandas.DateFrame.ewm()`,它会生成一个`ewm()对象`, 使用它的`.mean()`函数就可以计算**指数加权移动平均**

## 季节性数据

R语言分解季节性数据的函数: `stl()`

- 分解的内容:
  -  **季节性（Seasonal）**：反映了数据中的**周期性**波动，例如每年的季节变化或每月的波动。
  -  **趋势（Trend）**：捕捉了时间序列中的**长期变化趋势**，通常表示数据的上升或下降趋势。
  -  **残差（Remainder/Irregular）**：是指去除了季节性和趋势成分后的剩余部分，通常是**随机噪声或误差**。
